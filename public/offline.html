<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <title>PixelsPlace - Offline</title>
    <style>
        /* Variáveis globais (consistência) */
        :root {
        /* Cores */
        --color-outline: hsla(0deg, 0%, 100%, 10%);
        --color-accent: hsl(207, 100%, 42%);
        --color-accent-hover: hsl(211, 100%, 36%);
        --color-experimental-accent: hsl(47, 100%, 42%);
        --color-experimental-accent-hover: hsl(47, 100%, 36%);
        --color-darker: hsl(217.99, 100%, 44.9%);
        --color-mid-hover: hsl(223, 29%, 31%);
        --color-mid: hsl(222, 26%, 22%);
        --color-input-bg: hsl(225, 36%, 17%);
        --color-darkest: hsl(222, 40%, 13%);
        --color-bg: var(--color-darkest);
        --color-muted: hsl(212, 100%, 75%);
        --color-text-dark: hsla(0, 0%, 25%, 75%);
        --color-text-light: hsla(0, 0%, 100%, 75%);
        --color-hover: rgb(228, 228, 228);
        --color-canvas-bg: hsl(0, 0%, 92%);
        --color-header: var(--color-muted);
        /* Degradês */
        --frosted-glass: linear-gradient(45deg, hsla(0deg, 0%, 96.08%, 96.86%), hsla(0deg, 0%, 100%, 90.98%));
        /* Atributos */
        --shadow: 2px 2px 7px hsla(0, 0%, 0%, 14.1%);
        --outline: 1px solid var(--color-outline);
        --smooth-transition: all .4s ease;
        /* Valores */
        --hover-scale: 1.05;
        --frosted-glass-blur: blur(5px);
        }

        /* Temas */
        [data-theme=TRUE_DARK] {
        --color-bg: radial-gradient(circle at 60% 100%, var(--color-darkest), #0a0d16);
        --color-canvas-bg: var(--color-bg);
        --color-text-dark: var(--color-text-light);
        --color-hover: hsl(0, 0%, 13%);
        --frosted-glass: linear-gradient(45deg, hsl(0deg 0% 16% / 50%), hsl(0deg 0% 18.29% / 81%))
        }
        [data-theme=LIGHT] {
        --color-outline: hsl(0deg 0% 0% / 12%);
        --color-mid-hover: hsl(0, 0%, 100%);
        --color-hover: hsl(0, 0%, 100%);
        --color-mid: hsl(0, 0%, 100%);
        --color-input-bg: hsl(0, 0%, 100%);
        --color-darkest: hsl(0deg 0% 100%);
        --color-muted: var(--color-accent);
        --color-canvas-bg: hsl(0, 0%, 100%);
        --color-text-light: var(--color-text-dark);
        --color-header: var(--frosted-glass);
        }
        [data-theme=BLACKOUT] {
        --color-outline: hsla(0, 0%, 100%, 0.1);
        --color-mid-hover: hsl(0, 0%, 13%);
        --color-hover: hsl(0, 0%, 13%);
        --color-mid: hsl(0, 0%, 0%);
        --color-input-bg: hsl(0, 0%, 0%);
        --color-darkest: hsl(0, 0%, 0%);
        --color-canvas-bg: var(--color-bg);
        --color-text-dark: var(--color-text-light);
        --frosted-glass: linear-gradient(45deg, hsla(0deg, 0%, 4%, 96.86%), hsla(0deg, 0%, 0%, 90.98%));
        --color-header: var(--frosted-glass);
        }
        [data-theme=OLD] {
        --color-header: #7f99cb;
        --color-darkest: #293146;
        --color-mid: #141c2f;
        --color-muted: #9dcaff;
        --color-accent: #0075d5;
        --color-accent-hover: #0054e5;
        --frosted-glass: white;
        --color-outline: transparent;
        --color-canvas-bg: rgb(204, 204, 204);

        * {
            border-radius: 8px !important;
            font-family: Arial !important;
            font-size: small;
        }
        }
        [data-theme=ARCADE] {
        --color-outline: hsla(0, 0%, 100%, 0.1);
        --color-mid-hover: hsl(0, 0%, 13%);
        --color-hover: hsl(0, 0%, 13%);
        --color-mid: hsl(0, 0%, 0%);
        --color-input-bg: hsl(0, 0%, 0%);
        --color-darkest: hsl(0, 0%, 0%);
        --color-canvas-bg: var(--color-bg);
        --color-text-dark: var(--color-text-light);
        --frosted-glass: linear-gradient(45deg, hsla(0deg, 0%, 4%, 96.86%), hsla(0deg, 0%, 0%, 90.98%));
        --color-header: var(--frosted-glass);
        --outline: 2px solid var(--color-outline);
        --color-accent: hsl(125, 100%, 64%);
        --color-muted: hsla(125, 100%, 64%, 0.649);
        
        * {
            border-radius: 0 !important;
            font-family: 'Dogica Pixel' !important;
            font-size: x-small;
            line-height: 1.2;
        }
        }

        body {
            background: var(--color-bg);
            color: #fff;
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100dvw;
            height: 100dvh;
            margin: 0;
            box-sizing: border-box;
            justify-content: center;
        }

        #palette {
            margin-bottom: 10px;
        }

        .color {
            display: inline-block;
            width: 24px;
            height: 24px;
            margin: 0 5px;
            border: 2px solid #fff;
            cursor: pointer;
        }

        #canvas {
            display: grid;
            grid-template-columns: repeat(16, 20px);
            grid-template-rows: repeat(16, 20px);
            gap: 0;
            border: 1px solid #fff;
            cursor: crosshair;
        }

        .pixel {
            width: 20px;
            height: 20px;
            background: #000;
            cursor: pointer;
            box-shadow: inset 0px 0px 8px 1px #ffffff00;
            transition: var(--smooth-transition);
        }
        .pixel:hover {
            box-shadow: inset 0px 0px 8px 3px #ffffff1a;
        }
    </style>
</head>

<body id="main">
    <h1>Pixel Art</h1>
    <p id="status"></p>
    <p id="hurryMessage"></p>
    <div id="palette">
        <div class="color" style="background: red;" data-color="red"></div>
        <div class="color" style="background: blue;" data-color="blue"></div>
        <div class="color" style="background: yellow;" data-color="yellow"></div>
        <div class="color" style="background: green;" data-color="green"></div>
        <div class="color" style="background: white;" data-color="white"></div>
        <div class="color" style="background: black;" data-color="black"></div>
    </div>
    <canvas id="canvas" width="336" height="336"></canvas>

    <script>

        // Parte visual
        if(localStorage.getItem('theme')) document.getElementById("main").dataset.theme = localStorage.getItem('theme');
        
        // Parte funcional

        // Monitora status da conexão
        function updateStatus() {
            const status = document.getElementById('status');
            if (navigator.onLine) {
                status.textContent = '✅ Online';
                status.className = 'status online';
            } else {
                status.textContent = '❌ Offline';
                status.className = 'status';
            }
        }

        // Verifica status inicial
        updateStatus();

        // Monitora mudanças na conexão
        window.addEventListener('online', updateStatus);
        window.addEventListener('offline', updateStatus);

        // Auto-reload quando voltar online
        window.addEventListener('online', function () {
            setTimeout(() => {
                if (confirm('Conexão restaurada! Deseja recarregar a página?')) {
                    window.location.reload();
                }
            }, 1000);
        });

        // Parte minigame

        // === DESENHOS FÁCEIS (7 desenhos) ===
        // Coração simples
        const heart = [
            "0000000000000000",
            "0000000000000000",
            "0001100011000000",
            "0011110111100000",
            "0111111111110000",
            "0111111111110000",
            "0111111111110000",
            "0011111111100000",
            "0001111111000000",
            "0000111110000000",
            "0000011100000000",
            "0000001000000000",
            "0000000000000000",
            "0000000000000000",
            "0000000000000000",
            "0000000000000000"
        ];
        // Sol
        const sun = [
            "0000000100000000",
            "0001000100010000",
            "0000101010100000",
            "0010001110001000",
            "0001011111010000",
            "0000155555100000",
            "0101555555515010",
            "0001555555510000",
            "0001555555510000",
            "0101555555515010",
            "0000155555100000",
            "0001011111010000",
            "0010001110001000",
            "0000101010100000",
            "0001000100010000",
            "0000000100000000"
        ];
        // Estrela
        const star = [
            "0000000000000000",
            "0000000000000000",
            "0000001000000000",
            "0000001000000000",
            "0000011100000000",
            "0001111111000000",
            "0000111110000000",
            "0001111111000000",
            "0011111111100000",
            "0001111111000000",
            "0001100011000000",
            "0011000001100000",
            "0000000000000000",
            "0000000000000000",
            "0000000000000000",
            "0000000000000000"
        ];
        // Casa simples
        const house = [
            "0000000000000000",
            "0000000000000000",
            "0000001000000000",
            "0000011100000000",
            "0000111110000000",
            "0001111111000000",
            "0011111111100000",
            "0111111111110000",
            "0111111111110000",
            "0111511115110000",
            "0111511115110000",
            "0111511115110000",
            "0111111111110000",
            "0111111111110000",
            "0000000000000000",
            "0000000000000000"
        ];
        // Árvore
        const tree = [
            "0000000000000000",
            "0000000000000000",
            "0000003000000000",
            "0000033300000000",
            "0000333330000000",
            "0003333333000000",
            "0033333333300000",
            "0333333333330000",
            "0033333333300000",
            "0003333333000000",
            "0000333330000000",
            "0000055500000000",
            "0000055500000000",
            "0000055500000000",
            "0000000000000000",
            "0000000000000000"
        ];
        // Flor
        const flower = [
            "0000000000000000",
            "0000000000000000",
            "0000022200000000",
            "0002222222000000",
            "0022255522200000",
            "0222555555220000",
            "0222555555220000",
            "0022255522200000",
            "0002222222000000",
            "0000022200000000",
            "0000033300000000",
            "0000033300000000",
            "0000033300000000",
            "0000000000000000",
            "0000000000000000",
            "0000000000000000"
        ];
        // Maçã
        const apple = [
            "0000000000000000",
            "0000000000000000",
            "0000003000000000",
            "0000033300000000",
            "0000222200000000",
            "0002222222000000",
            "0022222222200000",
            "0222222222220000",
            "0222222222220000",
            "0222222222220000",
            "0222222222220000",
            "0022222222200000",
            "0002222222000000",
            "0000222200000000",
            "0000000000000000",
            "0000000000000000"
        ];
        // === DESENHOS MÉDIOS (5 desenhos) ===
        // Gato
        const cat = [
            "0000000000000000",
            "0001000000100000",
            "0001100001100000",
            "0001111111100000",
            "0011111111110000",
            "0111155155511000",
            "0111111111111000",
            "0111111111111000",
            "0111151115111000",
            "0111111111111000",
            "0111111111111000",
            "0011111111110000",
            "0001111111100000",
            "0000111111000000",
            "0000000000000000",
            "0000000000000000"
        ];
        // Peixe
        const fish = [
            "0000000000000000",
            "0000000000000000",
            "0011100000000000",
            "0111111000000000",
            "0444444400000000",
            "0444114411000000",
            "0444444411110000",
            "0444444411111000",
            "0444444411111000",
            "0444444411110000",
            "0444114411000000",
            "0444444400000000",
            "0111111000000000",
            "0011100000000000",
            "0000000000000000",
            "0000000000000000"
        ];
        // Borboleta
        const butterfly = [
            "0000000000000000",
            "0000000000000000",
            "0022000000220000",
            "0222200002220000",
            "0222220022220000",
            "0022222222220000",
            "0002222222200000",
            "0001111111100000",
            "0001111111100000",
            "0002222222200000",
            "0022222222220000",
            "0222220022220000",
            "0222200002220000",
            "0022000000220000",
            "0000000000000000",
            "0000000000000000"
        ];
        // Foguete
        const rocket = [
            "0000000000000000",
            "0000001000000000",
            "0000011100000000",
            "0000111110000000",
            "0001111111000000",
            "0001111111000000",
            "0001151511000000",
            "0001111111000000",
            "0001111111000000",
            "0001111111000000",
            "0001111111000000",
            "0015111115000000",
            "0055111115500000",
            "0055000005500000",
            "0050000000500000",
            "0000000000000000"
        ];
        // Carro
        const car = [
            "0000000000000000",
            "0000000000000000",
            "0000000000000000",
            "0000000000000000",
            "0000000000000000",
            "0011111111100000",
            "0111111111110000",
            "0111441144110000",
            "0111111111110000",
            "0111111111110000",
            "0111111111110000",
            "0111111111110000",
            "0511111111115000",
            "0055555555550000",
            "0000000000000000",
            "0000000000000000"
        ];
        // === DESENHOS DIFÍCEIS (3 desenhos) ===
        // Caveira
        const skull = [
            "0000000000000000",
            "0000111111000000",
            "0001111111100000",
            "0011111111110000",
            "0111111111111000",
            "0111511115111000",
            "0111111111111000",
            "0111151115111000",
            "0111111111111000",
            "0111111111111000",
            "0111111111111000",
            "0111151115111000",
            "0111111111111000",
            "0011111111110000",
            "0001111111100000",
            "0000111111000000"
        ];
        // Robô
        const robot = [
            "0000000000000000",
            "0000555555000000",
            "0005555555500000",
            "0055555555550000",
            "0555151515555000",
            "0555555555555000",
            "0555111111555000",
            "0555555555555000",
            "0555555555555000",
            "0555555555555000",
            "0555555555555000",
            "0555222222555000",
            "0555555555555000",
            "0055555555550000",
            "0005555555500000",
            "0000555555000000"
        ];
        // Dragão
        const dragon = [
            "0000000000000000",
            "0000000011000000",
            "0000001111100000",
            "0000011111110000",
            "0000111111111000",
            "0001111111111100",
            "0011111151111110",
            "0111111111111111",
            "0111111111111111",
            "0111111111111110",
            "0111111111111100",
            "0111111111111000",
            "0111111111110000",
            "0111111111100000",
            "0111111111000000",
            "0000000000000000"
        ];
        // Array com todos os desenhos organizados por dificuldade
        const drawings = {
            facil: [
                { name: "Coração", drawing: heart },
                { name: "Sol", drawing: sun },
                { name: "Estrela", drawing: star },
                { name: "Casa", drawing: house },
                { name: "Árvore", drawing: tree },
                { name: "Flor", drawing: flower },
                { name: "Maçã", drawing: apple }
            ],
            medio: [
                { name: "Gato", drawing: cat },
                { name: "Peixe", drawing: fish },
                { name: "Borboleta", drawing: butterfly },
                { name: "Foguete", drawing: rocket },
                { name: "Carro", drawing: car }
            ],
            dificil: [
                { name: "Caveira", drawing: skull },
                { name: "Robô", drawing: robot },
                { name: "Dragão", drawing: dragon }
            ]
        };

        // Desenho predefinido (16x16 matriz)
        let dificuldade = Math.round(Math.random() * 2);
        let desenho = Math.round(Math.random() * (drawings[['facil', 'medio', 'dificil'][dificuldade]].length - 1))
        document.getElementById('hurryMessage').innerHTML =
            `Rápido! Desenhe ${drawings[['facil', 'medio', 'dificil'][dificuldade]][desenho].name} (nível ${['facil', 'medio', 'dificil'][dificuldade]})`;

        const drawing = drawings[['facil', 'medio', 'dificil'][dificuldade]][desenho].drawing;

        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        let currentColor = "red";
        let isDrawing = false;
        const pixelSize = 21;
        const defaultColors = ["transparent", "rgba(0,0,0,0.5)", "rgba(255,0,0,0.5)", "rgba(0,255,0,0.5)", "rgba(0,0,255,0.5)", "rgba(255,255,0,0.5)"];

        // Desenha o fundo baseado no desenho predefinido
        function drawBackground() {
            drawing.forEach((row, y) => {
                row.split("").forEach((cell, x) => {
                    ctx.fillStyle = defaultColors[parseInt(cell)];
                    ctx.fillRect(x * pixelSize, y * pixelSize, pixelSize, pixelSize);
                });
            });
        }

        // Desenha a grade
        function drawGrid() {
            ctx.strokeStyle = "#66666666";
            ctx.lineWidth = 1;
            for (let i = 0; i <= 16; i++) {
                ctx.beginPath();
                ctx.moveTo(i * pixelSize, 0);
                ctx.lineTo(i * pixelSize, 16 * pixelSize);
                ctx.stroke();

                ctx.beginPath();
                ctx.moveTo(0, i * pixelSize);
                ctx.lineTo(16 * pixelSize, i * pixelSize);
                ctx.stroke();
            }
        }

        // Função para pintar um pixel
        function paintPixel(x, y) {
            const pixelX = Math.floor(x / pixelSize);
            const pixelY = Math.floor(y / pixelSize);
            if (pixelX >= 0 && pixelX < 16 && pixelY >= 0 && pixelY < 16) {
                ctx.fillStyle = currentColor;
                ctx.fillRect(pixelX * pixelSize, pixelY * pixelSize, pixelSize, pixelSize);
            }
        }

        // Obtém coordenadas do mouse relativas ao canvas
        function getMousePos(e) {
            const rect = canvas.getBoundingClientRect();
            return {
                x: e.clientX - rect.left,
                y: e.clientY - rect.top
            };
        }

        // Inicializa o canvas
        drawBackground();
        drawGrid();

        // Seleção de cor
        document.querySelectorAll(".color").forEach(c => {
            c.addEventListener("click", () => {
                currentColor = c.dataset.color;
            });
        });

        // Mouse events
        canvas.addEventListener("mousedown", (e) => {
            isDrawing = true;
            const pos = getMousePos(e);
            paintPixel(pos.x, pos.y);
        });

        canvas.addEventListener("mousemove", (e) => {
            if (isDrawing) {
                const pos = getMousePos(e);
                paintPixel(pos.x, pos.y);
            }
        });

        canvas.addEventListener("mouseup", () => {
            isDrawing = false;
        });

        canvas.addEventListener("mouseleave", () => {
            isDrawing = false;
        });

        // Touch events para dispositivos móveis
        canvas.addEventListener("touchstart", (e) => {
            e.preventDefault();
            isDrawing = true;
            const touch = e.touches[0];
            const pos = getMousePos(touch);
            paintPixel(pos.x, pos.y);
        });

        canvas.addEventListener("touchmove", (e) => {
            e.preventDefault();
            if (isDrawing) {
                const touch = e.touches[0];
                const pos = getMousePos(touch);
                paintPixel(pos.x, pos.y);
            }
        });

        canvas.addEventListener("touchend", (e) => {
            e.preventDefault();
            isDrawing = false;
        });
    </script>
</body>

</html>